=================================================================================================
== Test 26: Text File Persistence
== Creates a new gradebook with a small number of scores, then writes the
== gradebook to a file. Clears, then reads in that file to ensure that an
== identical gradebook is recovered from the saved data.
Running test...
Expected output is in file 'test_results/raw/project_1-26-expected.tmp'
Actual output is in file 'test_results/raw/project_1-26-actual.tmp'
Error: VALGRIND CHECK FAILED. Output:
Gradebook System
Commands:
  create <name>:          creates a new class with specified name
  class:                  shows the name of the class
  add <name> <score>:     adds a new score
  lookup <name>:          searches for a score by student name
  clear:                  resets current gradebook
  print:                  shows all scores, sorted by student name
  write_text:             saves all scores to text file
  read_text <file_name>:  loads scores from text file
  exit:                   exits the program
gradebook> create csci_2021
gradebook> add Sun 98
gradebook> add Hurley 80
gradebook> add Desmond 92
gradebook> add Miles 80
gradebook> add Eloise 100
gradebook> write_text
Gradebook successfully written to csci_2021.txt
gradebook> clear
gradebook> print
Error: You must create or load a gradebook first
gradebook> read_text csci_2021.txt
Gradebook loaded from text file
gradebook> class
csci_2021
gradebook> print
Scores for all students in csci_2021:
Hurley: 80
Sun: 98
Desmond: 92
Miles: 80
Eloise: 100
gradebook> lookup Desmond
Desmond: 92
gradebook> lookup Hurley
Hurley: 80
gradebook> lookup Eloise
Eloise: 100
gradebook> lookup Locke
No score for 'Locke' found
gradebook> lookup Miles
Miles: 80
gradebook> lookup Juliet
No score for 'Juliet' found
gradebook> lookup Sun
Sun: 98
gradebook> lookup Jin
No score for 'Jin' found
gradebook> exit


== Valgrind Results (from 'test_results/project_1-26-valgrd.tmp')
==10217== Memcheck, a memory error detector
==10217== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==10217== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==10217== Command: ./gradebook_main
==10217== Parent PID: 10110
==10217== 
==10217== Use of uninitialised value of size 8
==10217==    at 0x48BA2EB: _itoa_word (_itoa.c:177)
==10217==    by 0x48D5ABD: __vfprintf_internal (vfprintf-internal.c:1516)
==10217==    by 0x48C06C9: fprintf (fprintf.c:32)
==10217==    by 0x1097CF: write_gradebook_to_text (gradebook.c:122)
==10217==    by 0x109F37: main (gradebook_main.c:114)
==10217==  Uninitialised value was created by a heap allocation
==10217==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==10217==    by 0x10939D: create_gradebook (gradebook.c:20)
==10217==    by 0x109C10: main (gradebook_main.c:53)
==10217== 
==10217== Conditional jump or move depends on uninitialised value(s)
==10217==    at 0x48BA2FC: _itoa_word (_itoa.c:177)
==10217==    by 0x48D5ABD: __vfprintf_internal (vfprintf-internal.c:1516)
==10217==    by 0x48C06C9: fprintf (fprintf.c:32)
==10217==    by 0x1097CF: write_gradebook_to_text (gradebook.c:122)
==10217==    by 0x109F37: main (gradebook_main.c:114)
==10217==  Uninitialised value was created by a heap allocation
==10217==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==10217==    by 0x10939D: create_gradebook (gradebook.c:20)
==10217==    by 0x109C10: main (gradebook_main.c:53)
==10217== 
==10217== Conditional jump or move depends on uninitialised value(s)
==10217==    at 0x48D65C3: __vfprintf_internal (vfprintf-internal.c:1516)
==10217==    by 0x48C06C9: fprintf (fprintf.c:32)
==10217==    by 0x1097CF: write_gradebook_to_text (gradebook.c:122)
==10217==    by 0x109F37: main (gradebook_main.c:114)
==10217==  Uninitialised value was created by a heap allocation
==10217==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==10217==    by 0x10939D: create_gradebook (gradebook.c:20)
==10217==    by 0x109C10: main (gradebook_main.c:53)
==10217== 
==10217== Conditional jump or move depends on uninitialised value(s)
==10217==    at 0x48D5C05: __vfprintf_internal (vfprintf-internal.c:1516)
==10217==    by 0x48C06C9: fprintf (fprintf.c:32)
==10217==    by 0x1097CF: write_gradebook_to_text (gradebook.c:122)
==10217==    by 0x109F37: main (gradebook_main.c:114)
==10217==  Uninitialised value was created by a heap allocation
==10217==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==10217==    by 0x10939D: create_gradebook (gradebook.c:20)
==10217==    by 0x109C10: main (gradebook_main.c:53)
==10217== 
==10217== 
==10217== HEAP SUMMARY:
==10217==     in use at exit: 0 bytes in 0 blocks
==10217==   total heap usage: 18 allocs, 18 frees, 39,984 bytes allocated
==10217== 
==10217== All heap blocks were freed -- no leaks are possible
==10217== 
==10217== For lists of detected and suppressed errors, rerun with: -s
==10217== ERROR SUMMARY: 4 errors from 4 contexts (suppressed: 0 from 0)
